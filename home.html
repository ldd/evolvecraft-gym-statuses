<html lang="en">
  <head>
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
   <link href="bootstrap.min.css" rel="stylesheet">
    </head>

  <body>

   <div class="navbar navbar-inverse navbar-fixed-top" role="navigation">
      <div class="container">
        <div class="navbar-header">
          <a class="navbar-brand" href="#">Home</a>
        </div>
      </div>
    </div>

    <!-- Main jumbotron for a primary marketing message or call to action -->
    <div class="jumbotron">
      <div class="container">
        <h2>Gym Leader Status on EvolveCraft</h2>
      </div>
    </div>

    <div class="container">
      <div class="row" id="wrapper">
      </div>
      <hr>
    </div> <!-- /container -->

	<script>

//JSON representing the gym leader's data
var data = {
    "regions": {
        "Kanto": {
            "cities": [
                {
                    "Pewter": {
                        "leaders": [
                            "Motocross233",
                            "justldd",
                            "Secretlaser627"
                        ]
                    }
                },
             	
             	{
                    "Cerulean": {
                        "leaders": [
                            "manbooo"
                        ]
                    }
                },

             	{
                    "Vermillion": {
                        "leaders": [
                            "DarkraiSnivy",
                            "callumlfc10"
                        ]
                    }
                }
            ]
        },
        "Johto": {
            "cities": [
                {
                    "Violet": {
                        "leaders": [
                            "ProspectApex",
                            "CrassKal"
                        ]
                    }
                },
             	
             	{
                    "azalea": {
                        "leaders": [
                            "Sir_ralph",
                            "_JustNiek"
                        ]
                    }
                },
            ]
        },

    }
};



    initializeCities();
	var url = "http://www.evolvecraft.com/ajax.php?s=minecraft&f=players-online-avatars&preset_id=18527811&server=combined&format=json?callback=?";
	url = 'http://query.yahooapis.com/v1/public/yql?q=' + encodeURIComponent('select * from html where url="' + url + '"') + '&format=xml';
	var textt;
	var t = $.ajax({
	dataType: "text",
	url: url,
	success: function(text){
			var xmldoc = $.parseXML(text);
			var names = $(xmldoc).find('body');

			for (index = 0; index < names.children().length; index++){
				nameImage = names.children()[index].innerHTML;
				nameString = nameImage.split('/')[4];
				nameImage = nameImage.replace('alt', 'title="' + nameString+'"');
				
				//we check
				if (cities.hasOwnProperty(nameString)){
					divString = "#" + cities[nameString]
					$(divString).append(nameImage);
					$(divString).show();
				}
				
			}
			textt = names;
		}
	});

	function initializeCities(){
		cities = new Object();
		for (regionName in data.regions){

			$("#wrapper").append('<div class="col-md-4" id="'+regionName+'"><h3>'+regionName+' Gym Leaders</h3></div>')

			for (n = 0; n < data.regions[regionName].cities.length; n++){
				for (key in data.regions[regionName].cities[n]){

			$("#" + regionName).append('<div id="'+key+'">'+key+' Gym: </div>')
			$('#' + key).hide();

					for (i =0 ; i < data.regions[regionName].cities[n][key].leaders.length; i++){
						var name = data.regions[regionName].cities[n][key].leaders[i];
						cities[name] = key;
					}
				}
			}
		}

      };
  </script>
 
  </body>
</html>